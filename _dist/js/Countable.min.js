!function(global){"use strict";function _decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)value=string.charCodeAt(counter++),value>=55296&&value<=56319&&counter<length?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value,extra),counter--)):output.push(value);return output}function _validateArguments(elements,callback){var nodes=Object.prototype.toString.call(elements),elementsValid=elements&&(("[object NodeList]"===nodes||"[object HTMLCollection]"===nodes)&&elements.length||1===elements.nodeType),callbackValid=callback&&"function"==typeof callback;return"console"in window&&"warn"in console&&(elementsValid||console.warn("Countable: No valid elements were found"),callbackValid||console.warn('Countable: "'+callback+'" is not a valid callback function')),elementsValid&&callbackValid}function _extendDefaults(options){var defaults={hardReturns:!1,stripTags:!1,ignoreReturns:!1,ignoreZeroWidth:!0};for(var prop in options)defaults.hasOwnProperty(prop)&&(defaults[prop]=options[prop]);return defaults}function _count(element,options){var trimmed,original=""+("value"in element?element.value:element.innerText||element.textContent);return options.stripTags&&(original=original.replace(/<\/?[a-z][^>]*>/gi,"")),options.ignoreZeroWidth&&(original=original.replace(/[\u200B]+/,"")),trimmed=original.trim(),{paragraphs:trimmed?(trimmed.match(options.hardReturns?/\n{2,}/g:/\n+/g)||[]).length+1:0,sentences:trimmed?(trimmed.match(/[.?!…]+./g)||[]).length+1:0,words:trimmed?(trimmed.replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length:0,characters:trimmed?_decode(trimmed.replace(/\s/g,"")).length:0,all:_decode(options.ignoreReturns?original.replace(/[\n\r]/g,""):original).length}}function _loop(which,callback){var len=which.length;if(void 0!==len)for(;len--;)callback(which[len]);else callback(which)}var _liveElements=[],_event="oninput"in document?"input":"keyup";navigator.userAgent.match(/MSIE 9.0/)&&(_event="keyup"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var Countable={live:function(elements,callback,options){var ops=_extendDefaults(options),bind=function(element){var handler=function(){callback.call(element,_count(element,ops))};_liveElements.push({element:element,handler:handler}),handler(),element.addEventListener?element.addEventListener(_event,handler,!1):element.attachEvent&&element.attachEvent("on"+_event,handler)};if(_validateArguments(elements,callback))return elements.length?_loop(elements,bind):bind(elements),this},die:function(elements){if(_validateArguments(elements,function(){}))return _loop(elements,function(element){var liveElement;_loop(_liveElements,function(live){live.element===element&&(liveElement=live)}),liveElement&&(element.removeEventListener?element.removeEventListener(_event,liveElement.handler,!1):element.detachEvent&&element.detachEvent("on"+_event,liveElement.handler),_liveElements.splice(_liveElements.indexOf(liveElement),1))}),this},once:function(elements,callback,options){if(_validateArguments(elements,callback))return _loop(elements,function(element){callback.call(element,_count(element,_extendDefaults(options)))}),this},count:function(elements,callback,options){return this.once(elements,callback,options)},enabled:function(element){var isEnabled=!1;return element&&1===element.nodeType&&_loop(_liveElements,function(live){live.element===element&&(isEnabled=!0)}),isEnabled}};"object"==typeof exports?module.exports=Countable:"function"==typeof define&&define.amd?define(function(){return Countable}):global.Countable=Countable}(this);